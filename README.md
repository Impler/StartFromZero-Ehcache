# Ehcache

## 简介


## 存储层 （Tiers）
Tiers是指Ehcache用来存储数据的区域。Ehcache支持的存储区域包括：  
- 堆内存储（On-Heap）
- 堆外存储（Out-Heap）
- 硬盘存储（Disk）
- 集群存储（Clustered）

### 堆内存储（On-Heap）
使用java应用程序使用的堆内存来存储数据。  
特点：  
- 速度最快，但受限于可用的存储资源大小，即应用程序可使用的内存大小
- 可存储序列化和非序列化数据
- JVM会扫描该区域，进行GC操作

### 堆外存储（Out-Heap）
使用java应用程序使用的额外的内存来存储数据。  
特点：  
- 速度快，但由于需要序列化和反序列化，比堆内存储慢。也受可用存储资源大小限制
- 只能存储序列化后的数据
- JVM不会扫描该区域对象

### 硬盘存储（Disk）
使用部分硬盘空间存储数据。  
特点：  
- 存储空间大
- 速度稍慢，取决于硬盘读取速度

### 集群存储（Clustered）
数据存储在远程服务器上。  
特点：
- 这种方式由于需要建立在client/server之间的网络通信上，一般来讲速度慢于堆外存储  

Ehcache支持使用多个存储层，但有以下约束条件：  
- 堆内存储是必要的
- 硬盘存储和集群存储不可同时使用
- 多个存储之间应该按照访问速度的快慢由上往下排列（金字塔型）

可以选择的搭配方式比如：  
- heap + offheap
- heap + offheap + disk
- heap + offheap + clustered
- heap + disk
- heap + clustered